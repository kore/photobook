<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns="http://www.w3.org/2000/svg"
     height="{{ book.format.height }}mm" width="{{ book.format.width }}mm" version="1.1"
     xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink"
     viewBox="0 0 {{ book.format.width }} {{ book.format.height }}" xmlns:dc="http://purl.org/dc/elements/1.1/">
    <rect width="{{ book.format.width }}" height="{{ book.format.height }}" y="{{ 0 }}" x="{{ 0 }}" fill="{{ borderColor }}"/>
{% if rows %}
    {% set y = 0 %}
    {% for row in rows %}
        {% set x = 0 %}
        {% for pane in row %}
            <image width="{{ pane.width }}" height="{{ pane.height }}" xlink:href="{{ pane.photo }}" y="{{ y }}" x="{{ x }}" preserveAspectRatio="none"/>
            {% set x = x + pane.width + border %}
        {% endfor %}

        {% set y = y + rowHeight + border %}
    {% endfor %}
{% else %}
    {% set x = 0 %}
    {% for column in columns %}
        {% set y = 0 %}
        {% for pane in column %}
            <image height="{{ pane.height }}" width="{{ pane.width }}" xlink:href="{{ pane.photo }}" x="{{ x }}" y="{{ y }}" preserveAspectRatio="none"/>
            {% set y = y + pane.height + border %}
        {% endfor %}

        {% set x = x + columnWidth + border %}
    {% endfor %}
{% endif %}
</svg>
